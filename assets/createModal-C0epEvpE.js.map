{"version":3,"file":"createModal-C0epEvpE.js","sources":["../../src/helpers/closeModal.js","../../src/img/close.png","../../src/helpers/createModal.js"],"sourcesContent":["function closeMadal(evt){\n    if(evt.code === 'Escape'){\n      this.close();\n    }\n}\n\nexport { closeMadal };","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB6SURBVHgB7ZVBCsAgDASXvmR/aH/cp1gPHkqRmjRqEDLgRdcMiBogCIKFnGVQkWfdY5bmMi7I5KzZDKOcj0I9uSY7TC7JDJd/rU2Tt+amwJdoibQl/y09sAmEw1ETDpeLcHhOhMMHQkVBTbaLpUkkGEnQt0WzNAgCMTf64Es4we8RJwAAAABJRU5ErkJggg==\"","import * as basicLightbox from 'basiclightbox'\nimport \"basiclightbox/dist/basicLightbox.min.css\";\n\nimport { common } from '../common';\nconst  { KEY_FAVORITE, KEY_BASKET,  KEY_INSTRUMENT} = common;\nconst allInstruments = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\n\nimport {  closeMadal } from './closeModal';\nimport { createMarkup } from './createMarkup';\nimport    closeIcon from '../img/close.png';\nimport { \n          toFavorite,\n          toBusket,\n                     } from './favoriteFun';\n\nconst favList = document.querySelector('.favorite_list');\nconst basketList = document.querySelector('.checkout_list');\n\nfunction createModal({img, name, price, description, id}){\n  \n     const instance = basicLightbox.create(`\n\t    <div class=\"modal js-card\" data-id=${id}>\n            <div class=\"cross\">\n                 <img src=${closeIcon} alt=\"close\">\n            </div>\n            <img src=\"${img}\" alt=\"${name}\" width=\"300\">\n            <h2>${name} <span>id${id}</span></h2>\n            <h3>${price}point</h3>\n            <p>${description}</p>\n              <div>\n                  <button class=\"js-favorite\" type=\"button\">Add to favorite</button>\n                  <button class=\"js-basket\" type=\"button\">Add to basket</button>\n              </div>\n      </div>\n`, {\n    handler: null,\n    onShow(instance){\n      // console.log(this);\n      this.handler = closeMadal.bind(instance);\n    document.addEventListener('keydown', this.handler);\n\n  },\n    onClose(){\n      console.log(this);\n      document.removeEventListener('keydown', this.handler);\n      cross.removeEventListener('click', toClose);\n  },\n  \n});\n\n\ninstance.show();\n\n                    const cross = document.querySelector('.cross');\n                    // console.log(cross);\n                    cross.addEventListener('click', toClose);\n                    function toClose(){\n                    console.log('whoa!');\n                    instance.close();\n                    }\n\n const modal = document.querySelector('.modal');\n//  console.log(modal);\nconst favoriteModal = document.querySelector('.modal div button.js-favorite');\nconst basketModal =   document.querySelector('.modal div button.js-basket');\n                    console.log(favoriteModal);\n                    console.log(basketModal);\n modal.addEventListener('click', onClick);\n                                          function onClick(evt){\n                                          console.log(evt.target);\n                                          if(evt.target.classList.contains('js-favorite')){\n                toFavorite(evt.target, allInstruments);\n                const favorite = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n                createMarkup(favorite, favList);\n                                            }\n\n                                          if(evt.target.classList.contains('js-basket')){\n                toBusket(evt.target, allInstruments);\n                const basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n                createMarkup(basketArr,  basketList);                                  \n\n                                            }\n                                          }\n\n}\n\n\nexport { createModal };"],"names":["closeMadal","evt","closeIcon","KEY_FAVORITE","KEY_BASKET","KEY_INSTRUMENT","common","allInstruments","favList","basketList","createModal","img","name","price","description","id","instance","basicLightbox.create","cross","toClose","modal","favoriteModal","basketModal","onClick","toFavorite","favorite","createMarkup","toBusket","basketArr"],"mappings":"4GAAA,SAASA,EAAWC,EAAI,CACjBA,EAAI,OAAS,UACd,KAAK,MAAK,CAEhB,CCJA,MAAAC,EAAe,6UCIR,CAAE,aAAAC,EAAc,WAAAC,EAAa,eAAAC,CAAc,EAAIC,EAChDC,EAAiB,KAAK,MAAM,aAAa,QAAQF,CAAc,CAAC,EAUhEG,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAa,SAAS,cAAc,gBAAgB,EAE1D,SAASC,EAAY,CAAC,IAAAC,EAAK,KAAAC,EAAM,MAAAC,EAAO,YAAAC,EAAa,GAAAC,CAAE,EAAE,CAEpD,MAAMC,EAAWC,EAAAA,OAAqB;AAAA,0CACDF,CAAE;AAAA;AAAA,4BAEhBb,CAAS;AAAA;AAAA,wBAEbS,CAAG,UAAUC,CAAI;AAAA,kBACvBA,CAAI,YAAYG,CAAE;AAAA,kBAClBF,CAAK;AAAA,iBACNC,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMzB,CACC,QAAS,KACT,OAAOE,EAAS,CAEd,KAAK,QAAUhB,EAAW,KAAKgB,CAAQ,EACzC,SAAS,iBAAiB,UAAW,KAAK,OAAO,CAEnD,EACE,SAAS,CACP,QAAQ,IAAI,IAAI,EAChB,SAAS,oBAAoB,UAAW,KAAK,OAAO,EACpDE,EAAM,oBAAoB,QAASC,CAAO,CAC9C,CAEF,CAAC,EAGDH,EAAS,KAAI,EAEO,MAAME,EAAQ,SAAS,cAAc,QAAQ,EAE7CA,EAAM,iBAAiB,QAASC,CAAO,EACvC,SAASA,GAAS,CAClB,QAAQ,IAAI,OAAO,EACnBH,EAAS,MAAK,CACd,CAEnB,MAAMI,EAAQ,SAAS,cAAc,QAAQ,EAExCC,EAAgB,SAAS,cAAc,+BAA+B,EACtEC,EAAgB,SAAS,cAAc,6BAA6B,EACtD,QAAQ,IAAID,CAAa,EACzB,QAAQ,IAAIC,CAAW,EAC1CF,EAAM,iBAAiB,QAASG,CAAO,EACE,SAASA,EAAQtB,EAAI,CAErB,GADA,QAAQ,IAAIA,EAAI,MAAM,EACnBA,EAAI,OAAO,UAAU,SAAS,aAAa,EAAE,CAC1EuB,EAAWvB,EAAI,OAAQM,CAAc,EACrC,MAAMkB,EAAW,KAAK,MAAM,aAAa,QAAQtB,CAAY,CAAC,GAAK,CAAA,EACnEuB,EAAaD,EAAUjB,CAAO,CACF,CAEF,GAAGP,EAAI,OAAO,UAAU,SAAS,WAAW,EAAE,CACxE0B,EAAS1B,EAAI,OAAQM,CAAc,EACnC,MAAMqB,EAAY,KAAK,MAAM,aAAa,QAAQxB,CAAU,CAAC,GAAK,CAAA,EAClEsB,EAAaE,EAAYnB,CAAU,CAEP,CACF,CAE1C"}