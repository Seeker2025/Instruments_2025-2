{"version":3,"file":"favoriteFun-DEnG9lT1.js","sources":["../../src/common.js","../../src/img/no_img.png","../../src/helpers/createMarkup.js","../../src/helpers/findProduct.js","../../src/helpers/favoriteFun.js"],"sourcesContent":["const common ={\n        KEY_FAVORITE: 'favorite',\n        KEY_BASKET: 'basket',\n        KEY_INSTRUMENT: 'instruments',\n};\n\nexport { common }","export default \"__VITE_ASSET__BEu8qmmH__\"","import noImg from '../img/no_img.png';\nlet AddToFav = 'Add to favorite';\nlet RemoveFav = 'Remove from';\nlet AddToBas = 'Add to basket';\nlet RemoveBas = 'Remove from';\n\n\nfunction createMarkup(arr, list){\n   \n        let markup;\n        if(arr.length){\n        markup =  arr.map(({id, img, name, presentFuv, presentBas})=>`\n                    <li data-id=${id} class=\"card js-card\">\n                    <img src=\"${img}\" alt=\"${name}\" width=\"300\">\n                    <h2>${name}</h2>\n                    \n                    <span>id${id}</span>\n                    <p class=\"present\"><b>Favorite</b><span>${presentFuv}</span></p>\n                    <p class=\"present\"><b>Basket</b><span>${presentBas}</span></p>\n                    \n                    <p><a href=\"#\" class=\"info js-info\">More Information</a></p>\n                    <div>\n        <button class=\"js-favorite\" type=\"button\">${presentFuv ? RemoveFav : AddToFav}</button>\n        <button class=\"js-basket\" type=\"button\">${presentBas ? RemoveBas : AddToBas}</button>\n                    </div>\n                    </li>\n                    `).join('');\n                list.innerHTML = markup;\n    }else{\n        markup =   `<li class=\"js-card\">\n                    <img src=${noImg} alt=\"404\" width=\"300\">\n                    </li>`\n                list.innerHTML = markup;\n    }\n};\n\nexport { createMarkup };\n\n","function findProduct(elem, arr){\n    const productId = Number(elem.closest('.js-card').dataset.id)\n    return arr.find(({id}) => id === productId);\n}\n\n\nexport { findProduct };","import { common } from '../common';\nconst{ KEY_FAVORITE, KEY_BASKET, KEY_INSTRUMENT } = common;\n// import { instruments } from '../instruments';\nimport { findProduct } from './findProduct';\n// const allInstruments = JSON.parse(localStorage.getItem(KEY_INSTRUMENT));\n// import { allInstruments } from '../index';\n\nlet favoriteArr = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\nlet basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n\n\nfunction toFavorite(elemFuv, allInstruments){\n \n                const product = findProduct(elemFuv, allInstruments);\n                const inStorage = favoriteArr.some(({ id })=> id === product.id);\n              \n               \n                                                        \n        if(inStorage){\n            \n               favoriteArr = favoriteArr.filter((itm)=>itm.id!==product.id);\n                                        allInstruments.map(itm =>{\n                                        if(itm.id === product.id) {\n                                        itm.presentFuv = null;\n                                            }      \n                                                 })\n               localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments));      \n               localStorage.setItem(KEY_FAVORITE, JSON.stringify(favoriteArr));\n              \n           }else{\n\n               favoriteArr.push(product);\n                \n                                        allInstruments.map(itm =>{\n                                        if(itm.id === product.id) {\n                                        itm.presentFuv = 'present';\n                                            }      \n                                                 })\n               localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments));                                \n               localStorage.setItem(KEY_FAVORITE, JSON.stringify(favoriteArr));\n               }\n  }\n\n\n\n function toBusket(elemBus, allInstruments){\n                const product = findProduct(elemBus, allInstruments);\n                const inStorage = basketArr.some(({ id })=> id === product.id);\n                                                                           \n        if(inStorage){\n            \n               basketArr = basketArr.filter((itm)=>itm.id!==product.id);\n               allInstruments.map(itm =>{\n                                        if(itm.id === product.id) {\n                                        itm.presentBas = null;\n                                            }      \n                                                 })\n                                           \n               localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments));  \n               localStorage.setItem(KEY_BASKET, JSON.stringify(basketArr));\n\n                    \n          }else{\n                                      \n               basketArr.push(product);\n                                        allInstruments.map(itm =>{\n                                        if(itm.id === product.id) {\n                                        itm.presentBas = 'present';\n                                            }      \n                                                 })\n               localStorage.setItem(KEY_INSTRUMENT, JSON.stringify(allInstruments));  \n               localStorage.setItem(KEY_BASKET, JSON.stringify(basketArr));\n          }\n      \n    \n }\n\n\n\nexport { toFavorite, toBusket };  \n"],"names":["common","noImg","AddToFav","RemoveFav","AddToBas","RemoveBas","createMarkup","arr","list","markup","id","img","name","presentFuv","presentBas","findProduct","elem","productId","KEY_FAVORITE","KEY_BASKET","KEY_INSTRUMENT","favoriteArr","basketArr","toFavorite","elemFuv","allInstruments","product","itm","toBusket","elemBus"],"mappings":"ssBAAK,MAACA,EAAQ,CACN,aAAc,WACd,WAAY,SACZ,eAAgB,aACxB,ECJAC,EAAe,iDCCf,IAAIC,EAAW,kBACXC,EAAY,cACZC,EAAW,gBACXC,EAAY,cAGhB,SAASC,EAAaC,EAAKC,EAAK,CAExB,IAAIC,EACDF,EAAI,QACPE,EAAUF,EAAI,IAAI,CAAC,CAAC,GAAAG,EAAI,IAAAC,EAAK,KAAAC,EAAM,WAAAC,EAAY,WAAAC,CAAU,IAAI;AAAA,kCACnCJ,CAAE;AAAA,gCACJC,CAAG,UAAUC,CAAI;AAAA,0BACvBA,CAAI;AAAA;AAAA,8BAEAF,CAAE;AAAA,8DAC8BG,CAAU;AAAA,4DACZC,CAAU;AAAA;AAAA;AAAA;AAAA,oDAIlBD,EAAaV,EAAYD,CAAQ;AAAA,kDACnCY,EAAaT,EAAYD,CAAQ;AAAA;AAAA;AAAA,qBAG9D,EAAE,KAAK,EAAE,EACdI,EAAK,UAAYC,IAEzBA,EAAW;AAAA,+BACYR,CAAK;AAAA,2BAEpBO,EAAK,UAAYC,EAEjC,CClCA,SAASM,EAAYC,EAAMT,EAAI,CAC3B,MAAMU,EAAY,OAAOD,EAAK,QAAQ,UAAU,EAAE,QAAQ,EAAE,EAC5D,OAAOT,EAAI,KAAK,CAAC,CAAC,GAAAG,CAAE,IAAMA,IAAOO,CAAS,CAC9C,CCFA,KAAK,CAAE,aAAAC,EAAc,WAAAC,EAAY,eAAAC,CAAc,EAAKpB,EAMpD,IAAIqB,EAAc,KAAK,MAAM,aAAa,QAAQH,CAAY,CAAC,GAAK,CAAA,EAChEI,EAAY,KAAK,MAAM,aAAa,QAAQH,CAAU,CAAC,GAAK,CAAA,EAGhE,SAASI,EAAWC,EAASC,EAAe,CAE5B,MAAMC,EAAUX,EAAYS,EAASC,CAAc,EACjCJ,EAAY,KAAK,CAAC,CAAE,GAAAX,KAAQA,IAAOgB,EAAQ,EAAE,GAMhEL,EAAcA,EAAY,OAAQM,GAAMA,EAAI,KAAKD,EAAQ,EAAE,EAClCD,EAAe,IAAIE,GAAM,CACtBA,EAAI,KAAOD,EAAQ,KACtBC,EAAI,WAAa,KAER,CAAC,EACnC,aAAa,QAAQP,EAAgB,KAAK,UAAUK,CAAc,CAAC,EACnE,aAAa,QAAQP,EAAc,KAAK,UAAUG,CAAW,CAAC,IAI9DA,EAAY,KAAKK,CAAO,EAECD,EAAe,IAAIE,GAAM,CACtBA,EAAI,KAAOD,EAAQ,KACtBC,EAAI,WAAa,UAER,CAAC,EACnC,aAAa,QAAQP,EAAgB,KAAK,UAAUK,CAAc,CAAC,EACnE,aAAa,QAAQP,EAAc,KAAK,UAAUG,CAAW,CAAC,EAE3E,CAID,SAASO,EAASC,EAASJ,EAAe,CAC3B,MAAMC,EAAUX,EAAYc,EAASJ,CAAc,EACjCH,EAAU,KAAK,CAAC,CAAE,GAAAZ,KAAQA,IAAOgB,EAAQ,EAAE,GAI9DJ,EAAYA,EAAU,OAAQK,GAAMA,EAAI,KAAKD,EAAQ,EAAE,EACvDD,EAAe,IAAIE,GAAM,CACGA,EAAI,KAAOD,EAAQ,KACtBC,EAAI,WAAa,KAER,CAAC,EAEnC,aAAa,QAAQP,EAAgB,KAAK,UAAUK,CAAc,CAAC,EACnE,aAAa,QAAQN,EAAY,KAAK,UAAUG,CAAS,CAAC,IAK1DA,EAAU,KAAKI,CAAO,EACGD,EAAe,IAAIE,GAAM,CACtBA,EAAI,KAAOD,EAAQ,KACtBC,EAAI,WAAa,UAER,CAAC,EACnC,aAAa,QAAQP,EAAgB,KAAK,UAAUK,CAAc,CAAC,EACnE,aAAa,QAAQN,EAAY,KAAK,UAAUG,CAAS,CAAC,EAIxE"}